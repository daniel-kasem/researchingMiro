<!DOCTYPE html>
<html lang="en">

<head>
  <script type="text/javascript" src="https://miro.com/app/static/sdk.1.1.js"></script>
  <script type="text/javascript">
    let currentSticker_X = 0
    let currentSticker_Y = 0
    let stickerCount = 0
    let stickerOffset = 50
    const Icon_Asteroid =
      '<g><path d="m175 512c-46.744 0-90.69-18.203-123.743-51.257-33.054-33.052-51.257-76.999-51.257-123.743s18.203-90.69 51.257-123.743l197.989-197.99c4.418-4.419 11.113-5.634 16.805-3.053 5.69 2.582 9.185 8.422 8.769 14.657l-5.363 80.453 221.064-105.852c5.74-2.748 12.585-1.577 17.085 2.923 4.499 4.499 5.67 11.347 2.923 17.085l-105.853 221.064 80.453-5.363c6.23-.423 12.074 3.077 14.657 8.769 2.583 5.69 1.366 12.386-3.053 16.805l-197.99 197.989c-33.053 33.053-76.999 51.256-123.743 51.256z" fill="#ff8659"/><path d="m496.733 262.754c4.419-4.419 5.636-11.114 3.053-16.805s-8.427-9.191-14.657-8.768l-80.453 5.363 105.853-221.065c2.747-5.738 1.576-12.586-2.923-17.085l-456.349 456.349c33.053 33.054 76.999 51.257 123.743 51.257s90.69-18.203 123.743-51.257z" fill="#ff4a4a"/><path d="m175 452c-63.411 0-115-51.589-115-115s51.589-115 115-115 115 51.589 115 115-51.589 115-115 115z" fill="#ffe278"/><g><path d="m175 452c63.411 0 115-51.589 115-115 0-31.706-12.897-60.456-33.721-81.279l-162.558 162.558c20.823 20.824 49.573 33.721 81.279 33.721z" fill="#ffb454"/></g><circle cx="229" cy="331" fill="#ff8659" r="15"/><circle cx="167" cy="386" fill="#ff8659" r="15"/><circle cx="138" cy="310" fill="#ffb454" r="15"/></g>'
    miro.onReady(() => {
      miro.initialize({
        extensionPoints: {
          bottomBar: {
            title: 'Asteroid sticker',
            svgIcon: Icon_Asteroid
            //svgIcon: '<circle cx="12" cy="12" r="9" fill="none" fill-rule="evenodd" stroke="currentColor" stroke-width="2"/>',
            onClick: async () => {
              newAsteroidSticker()
            }
          }
        }
      })
    })

    async function newAsteroidSticker() {
      currentSticker_X += stickerOffset
      currentSticker_Y += stickerOffset
      stickerCount += 1
      if (stickerCount % 4 === 0) {
        currentSticker_Y = stickerOffset
      }
      let sticker = (await miro.board.widgets.create({
        "type": "image",
        "url": "https://daniel-kasem.github.io/researchingMiro/images/asteroidPostIt.png",
        "x": currentSticker_X,
        "y": currentSticker_Y
      }))[0]
      let stickerX = (await sticker.x)
      let stickerY = (await sticker.y)
      let stickerWidth = (await sticker.bounds.width)
      let stickerHeight = (await sticker.bounds.height)
      let textBox = (await miro.board.widgets.create({
        "type": "text",
        "x": stickerX,
        "y": stickerY,
        "width": stickerWidth
      }))[0]
      //await miro.board.viewport.zoomToObject(sticker)
      textBox.style = {
        "fontFamily": "Permanent Marker",
        "fontSize": 14,
        "textAlign": "center",
        "textColor": "#1a1a1a"
      }
      textBox.text = "Type here :O"
      miro.board.widgets.update(textBox)
      await miro.board.viewport.zoomToObject(textBox)
    }
    //https://daniel-kasem.github.io/researchingMiro/main.html
    //https://daniel-kasem.github.io/researchingMiro/images/asteroidPostIt.png
  </script>
</head>

<body>
  <span>Confirm changes to main.html - 66</span>
  <div>
    Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a
      href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>
  </div>
</body>

</html>
